<div id="dossierContainer"></div>
<script src="http://demo.microstrategy.com/MicroStrategyLibrary/javascript/embeddinglib.js"></script>

baseRestURL = "https://demo.microstrategy.com/MicroStrategyLibrary";
projectID   = "B7CA92F04B9FAE8D941C3E9B7E0CD754";
dossierID   = "43CDADC942EA17F40F7629BE9D48861B";
username    = "demo";
password    = "";

var dossierUrl = baseRestURL + '/app/' + projectID + '/' + dossierID;

microstrategy.dossier.create({

	placeholder: document.getElementById("dossierContainer"),
	url: dossierUrl,

	disableNotification: true,
	enableResponsive: true,

}).then(function(dossier) {
	/* Code to execute after the Dossier has finished loading... */
});

function login() {
	/* Prepare some parameters for login request */
	var options = {
		method: 'POST',
		credentials: 'include', /* include cookie */
		mode: 'cors', /* set as CORS mode for cross origin resource sharing */
		headers: {'Content-Type': 'application/json'},
		body: JSON.stringify({
		/* loginMode: 8 */ /* Login as guest user. */
		"loginMode": 1, /* standard login mode */
		"username": username,
		"password": password
		})
	};

	/* The actual login takes place here */
	return fetch(baseRestURL + '/api/auth/login', options).then(function (response) {
		if (response.ok) {
		return response.headers.get('x-mstr-authToken');
		} else {
		response.json().then(function(json) {
			console.log(json);
		});
		}
	}).catch(function (error) {
		console.log(error);
	});
};
